<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grid-X Protocol | Technical Documentation</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        :root {
            --primary-cyan: #00f0ff;
            --primary-blue: #0070f3;
            --sidebar-width: 300px;
            --text-main: #e0e0e0;
            --text-dim: #94a3b8;
            --bg-deep: #050505;
            --bg-surface: #0f172a;
            --border-color: #1e293b;
            --accent-glow: rgba(0, 240, 255, 0.1);
        }

        * { box-sizing: border-box; }

        body {
            font-family: 'Inter', -apple-system, system-ui, sans-serif;
            background-color: var(--bg-deep);
            color: var(--text-main);
            margin: 0;
            display: flex;
            min-height: 100vh;
            line-height: 1.6;
        }

        /* Sidebar Navigation */
        aside {
            width: var(--sidebar-width);
            background: var(--bg-surface);
            border-right: 1px solid var(--border-color);
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            padding: 2.5rem 1.5rem;
            scrollbar-width: thin;
        }

        aside h2 {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: var(--primary-cyan);
            margin-bottom: 1.5rem;
        }

        aside nav ul { list-style: none; padding: 0; margin: 0; }
        
        .nav-group-title {
            font-size: 0.8rem;
            font-weight: 700;
            color: #fff;
            margin: 1.5rem 0 0.5rem 0.5rem;
            display: block;
            border-left: 2px solid var(--primary-blue);
            padding-left: 8px;
        }

        aside nav a { 
            display: block; 
            padding: 0.6rem 0.8rem; 
            color: var(--text-dim); 
            text-decoration: none; 
            font-size: 0.9rem;
            transition: all 0.2s ease;
            border-radius: 6px;
        }

        aside nav a:hover { 
            background: var(--accent-glow); 
            color: var(--primary-cyan); 
            padding-left: 1.2rem;
        }

        /* Content Area */
        main {
            margin-left: var(--sidebar-width);
            padding: 4rem 6rem;
            max-width: 1100px;
            width: 100%;
        }

        section { margin-bottom: 5rem; scroll-margin-top: 2rem; }

        h1 { font-size: 2.5rem; font-weight: 800; color: #fff; margin-bottom: 1rem; letter-spacing: -0.02em; }
        h2 { font-size: 1.75rem; color: #fff; margin-top: 0; border-bottom: 1px solid var(--border-color); padding-bottom: 0.75rem; }
        h3 { font-size: 1.25rem; color: var(--primary-cyan); margin-top: 2rem; }

        p, li { color: var(--text-dim); font-size: 1.05rem; margin-bottom: 1.2rem; }
        strong { color: #fff; }

        /* Technical Components */
        code { 
            background: #1e293b; 
            padding: 0.2rem 0.4rem; 
            border-radius: 4px; 
            font-family: 'Fira Code', monospace; 
            font-size: 0.9em; 
            color: #38bdf8;
        }

        pre { 
            background: #010409; 
            padding: 1.5rem; 
            border-radius: 12px; 
            border: 1px solid var(--border-color);
            overflow-x: auto;
            box-shadow: 0 4px 24px rgba(0,0,0,0.4);
        }

        .mermaid { 
            background: #fff; /* Flowcharts usually need white bg for contrast unless themed */
            padding: 2rem;
            border-radius: 12px;
            margin: 2rem 0;
        }

        .status-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 8px;
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: var(--bg-deep); }
        ::-webkit-scrollbar-thumb { background: var(--border-color); border-radius: 10px; }
    </style>
</head>
<body>

<aside>
    <h2>Grid-X Protocol</h2>
    <nav>
        <ul>
            <li><a href="#intro">Core Concept</a></li>
            <li><a href="#architecture">System Architecture</a></li>
            <li><a href="#roles">Network Participants</a></li>
            
            <span class="nav-group-title">RESEARCHER OPERATIONS</span>
            <li><a href="#buyer-start">Initial Provisioning</a></li>
            <li><a href="#buyer-job">Job Submission Pipeline</a></li>
            <li><a href="#buyer-monitor">Real-time Telemetry</a></li>
            
            <span class="nav-group-title">PROVIDER OPERATIONS</span>
            <li><a href="#seller-reqs">Infrastructure Specs</a></li>
            <li><a href="#seller-install">Agent Deployment</a></li>
            <li><a href="#seller-run">Orchestration</a></li>
            
            <span class="nav-group-title">ENGINEERING</span>
            <li><a href="#dev-backend">API Specification</a></li>
            <li><a href="#dev-worker">Worker Internals</a></li>
            <li><a href="#limits">Protocol Roadmaps</a></li>
        </ul>
    </nav>
</aside>

<main>
    <section id="intro">
        <h1>Protocol Documentation</h1>
        <p>A distributed High-Throughput Computing (HTC) substrate designed for scientific acceleration.</p>

        <h2>1. Executive Summary</h2>
        <h3>The Grid-X Vision</h3>
        <p>Grid-X is a decentralized resource mesh that facilitates the exchange of computational power. By abstracting consumer-grade hardware into a unified virtual supercomputer, we provide researchers with a low-latency alternative to traditional cloud providers.</p>

        <h3>Architecture Philosophy</h3>
        <p>Unlike monolithic grids, Grid-X utilizes a <strong>Hub-and-Spoke</strong> model. The Hub serves as the orchestration layer (Control Plane), while the decentralized Agents function as the execution layer (Data Plane).</p>
    </section>

    <section id="architecture">
        <h2>2. Architecture & Flow</h2>
        <p>The system is divided into three primary tiers to ensure separation of concerns and security.</p>
        
        
        
        <div class="mermaid">
        flowchart LR
            subgraph Control_Plane [Grid-X Hub]
                API[REST Interface]
                Sched[Scheduler]
                Store[(State Store)]
            end
            
            subgraph Data_Plane [Worker Nodes]
                Agent[Node Agent]
                Docker[Sandboxed Container]
            end

            Researcher -->|POST /jobs| API
            API --> Store
            Agent -->|Long Poll| Sched
            Sched -->|Dispatch| Agent
            Agent -->|Exec| Docker
            Docker -->|Result| Agent
            Agent -->|Push| API
        </div>
    </section>

    <section id="buyer-job">
        <h2>3. Researcher Manual</h2>
        <h3>Job Submission Pipeline</h3>
        <p>A job in Grid-X consists of three immutable components:</p>
        <ul>
            <li><strong>Logic:</strong> The entry point script (.py, .js, .wasm).</li>
            <li><strong>Payload:</strong> The static dataset or environment variables required.</li>
            <li><strong>Constraints:</strong> Hardware requirements (RAM, vCPU) and TTL (Time-to-Live).</li>
        </ul>

        <h3>Execution States</h3>
        <p>
            <span class="status-dot" style="background: #94a3b8;"></span> <strong>PENDING:</strong> Job is entering the global queue.<br>
            <span class="status-dot" style="background: #3b82f6;"></span> <strong>ACTIVE:</strong> Script is executing within a provider container.<br>
            <span class="status-dot" style="background: #10b981;"></span> <strong>RESOLVED:</strong> Output artifacts are hashed and ready for egress.
        </p>
    </section>

    <section id="seller-install">
        <h2>4. Provider Manual</h2>
        <h3>Agent Deployment</h3>
        <p>To join the mesh as a provider, you must deploy the <code>grid-x-agent</code>. The agent is designed to be lightweight and non-intrusive.</p>

        <pre><code># Deployment Sequence
git clone https://github.com/Xplant2006/Grid-X.git
cd packages/agent

# Install Environment
npm install

# Initialize Node
node index.js --hub="https://hub.grid-x.io"</code></pre>

        <h3>Security & Isolation</h3>
        <p>Grid-X enforces <strong>Strict Sandbox Isolation</strong>. All researcher code is executed within Docker containers with limited syscall access. Providers are shielded from any direct execution on their host OS.</p>
    </section>

    <section id="dev-worker">
        <h2>5. Engineering Specifications</h2>
        <h3>Worker Polling Logic</h3>
        <p>The Agent utilizes an adaptive polling mechanism. If the mesh is idle, the interval increases to conserve bandwidth. Upon job detection, the agent switches to high-frequency telemetry reporting.</p>
        
        <h3>Current Constraints</h3>
        <ul>
            <li><strong>Network:</strong> NAT traversal is handled via the Hub; direct P2P is currently in alpha.</li>
            <li><strong>Storage:</strong> Individual job payloads are currently capped at 500MB.</li>
            <li><strong>Runtime:</strong> Native support for Python 3.11+ and Node.js 20+.</li>
        </ul>
    </section>

    <footer style="margin-top: 5rem; padding-top: 2rem; border-top: 1px solid var(--border-color); color: var(--text-dim); font-size: 0.8rem;">
        Grid-X Protocol Specification | 2026 Revision | MIT Licensed Infrastructure
    </footer>
</main>

<script>
    mermaid.initialize({ 
        startOnLoad: true, 
        theme: 'dark',
        themeVariables: {
            primaryColor: '#0070f3',
            mainBkg: '#0f172a',
            nodeBorder: '#1e293b',
            lineColor: '#00f0ff'
        }
    });
</script>

</body>
</html>